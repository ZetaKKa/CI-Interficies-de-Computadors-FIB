JETPIC
////INSTRUCCIONS
A l'iniciar el joc hem de pitjar el botó START per començar a jugar com ens mostren les pantalles d'inici. Seguidament, ja entrem en el joc en si. Convindria seleccionar 1 dels 4 modes de dificultat:
BORING (fàcil): els enemics es mouen cada 5 segons i cada combustible augmenta de 5 en 5.
LIVELY (normal): els enemics es mouen cada 4 segons i cada combustible augmenta de 4 en 4.
BRUTAL (difícil): els enemics es mouen cada 3 segons i cada combustible augmenta de 3 en 3.
EXTREME (molt difícil): els enemics es mouen cada 2 segons i cada combustible augmenta de 2 en 2.
Cada combustible un cop deixat a la base, reapareixerà en una nova posició i farà augmenta la càrrega de la barra. A l'impactar amb un enemic, es perd el combustible si en portava i un cor, l'enemic i el combustible si en tenia tornen a reaparèixer. Al perdre els 3 cors, s'acaba la partida i segons la quantitat de combustible portat a la base apareix un missatge diferent sobre el teu rendiment. Al carregar al complet la barra, s'acaba la partida i segons la quantitat de cors finals apareix un missatge diferent sobre el teu rendiment.
////CODI
La primera part del codi té com a objectiu imprimir per la GLCD i la Virtual Terminal.
En primer lloc, trobem la funció que imprimeix el temps transcorregut en minuts segons i dècimes i la seva corresponent roda. Continuem amb les funcions que imprimeixen el nivell, és a dir el rectangle i la seva càrrega que parteix de 48 i arriba fins a 22, valors extrets de les coordenades de la pantalla GLCD. Funció per imprimir la quantitat de vides o cors.
La següent part tracta sobre els moviments. Trobem dues funcions que generen posicions aleatòries del combustible i dels enemics. Seguim amb el moviment del combustible, quan la nau l'agafa i quan la nau xoca amb algun enemic o deixa el combustible a la base. Continuem amb els enemics i la funció de xoc, si un dels enemics xoca amb la nau o el combustible, perd un cor i el combustible i seguidament l'enemic torna a reaparèixer amb la funció spawn. Arribem a la funció per moure enemics on es creen variables que imiten les coordenades de cada enemic perquè l'enemic no aconsegueixi arribar a posicions prohibides com la fila 0 i la columna 25. Tots els enemics es mouen cap a baix, és a dir augment de fila, però 2 dels 3 enemics es mouen cap a la dreta i l'altre cap a l'esquerra. Si arriben a l'extrem inferior de la pantalla, reapareixen a l'extrem superior, el mateix succeeix si arriben a un dels extrems laterals, reapareixen a l'extrem lateral oposat. El moviment de la nau es pot realitzar tant per botons físics que compten amb flancs de pujada com per teclat o anar canviant. En aquesta implementació el jugador té un avantatge, ja que pot moure's per l'última fila amb el combustible ocupant 1 fila en comptes de dues (nau+combustible) i així esquivar millor els enemics.
Pel que fa a la dificultat, hi trobem 4 que parteixen de 0 i avancen cada 255 segons el potenciòmetre. En la interrupció només hi trobem el cronòmetre i el Led PWM. Amb la implementació del nou botó START, trobem la funció de reinici per quan s'acabi la partida, la funció d'inici per quan encara no s'ha pitjat el botó START i la funció de game over que espera fins que es pitja el botó START per tornar a començar la partida. En el main trobem la crida de la majoria de funcions mencionades anteriorment i de l'escriptura per la Virtual Terminal.
//COMPLICACIONS
A l'hora d'enviar i rebre informació/missatges de la Virtual Terminal asincronament. Van sorgir bastants complicacions respecte a les interrupcions, crear el joc només a partir d'interrupcions del TMR0 i el TMR2 suposava grans problemes amb la pantalla GLCD on es dibuixaven punts o figures que no corresponien i referent al cronòmetre, que presentava molta diferència amb la realitat. Per tant, es va optar per fer per interrupcions només el cronòmetre i el PWM. Altres complicacions foren les opcions de random i els flags, ja que es van haver de crear bastants flags perquè no s'imprimissin per pantalla infinitat d'enemics o de combustibles i fer que els enemics es moguin en un cert temps concret.
